{% extends 'base.html' %}
{% block content %}
<h2>Admin Panel</h2>
<h4>Add New Book</h4>
<form method="post" action="/admin/add_book" class="mb-4">
  <div class="row g-2">
    <div class="col"><input type="text" name="title" class="form-control" placeholder="Title" required></div>
    <div class="col"><input type="text" name="author" class="form-control" placeholder="Author" required></div>
    <div class="col"><input type="number" name="price" class="form-control" placeholder="Price" required></div>
    <div class="col"><input type="text" name="category" class="form-control" placeholder="Category"></div>
    <div class="col"><input type="number" name="stock" class="form-control" placeholder="Stock" required></div>
    <div class="col"><button type="submit" class="btn btn-success">Add</button></div>
  </div>
</form>
<h4>Books</h4>
<table class="table table-bordered">
  <thead><tr><th>ID</th><th>Title</th><th>Author</th><th>Price</th><th>Category</th><th>Stock</th><th>Actions</th></tr></thead>
  <tbody>
    {% for book in books %}
    <tr>
      <form method="post" action="/admin/update_book/{{ book.id }}">
      <td>{{ book.id }}</td>
      <td><input type="text" name="title" value="{{ book.title }}" class="form-control" required></td>
      <td><input type="text" name="author" value="{{ book.author }}" class="form-control" required></td>
      <td><input type="number" name="price" value="{{ book.price }}" class="form-control" required></td>
      <td><input type="text" name="category" value="{{ book.category }}" class="form-control"></td>
      <td><input type="number" name="stock" value="{{ book.stock }}" class="form-control" required></td>
      <td>
        <button type="submit" class="btn btn-primary btn-sm">Update</button>
      </form>
      <form method="post" action="/admin/delete_book/{{ book.id }}" style="display:inline;">
        <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Delete this book?');">Delete</button>
      </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<h4>Orders</h4>
<table class="table table-bordered">
  <thead><tr><th>Order ID</th><th>User</th><th>Date</th></tr></thead>
  <tbody>
    {% for order in orders %}
    <tr>
      <td>{{ order.id }}</td>
      <td>{{ order.name }}</td>
      <td>{{ order.order_date }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
